
CREATE DATABASE IF NOT EXISTS cursos_online_db;
USE cursos_online_db;


CREATE TABLE categoria
(
    id          BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre      VARCHAR(100) NOT NULL,
    descripcion VARCHAR(255)
);


CREATE TABLE curso
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    titulo       VARCHAR(100) NOT NULL,
    descripcion  TEXT,
    categoria_id BIGINT       NOT NULL,
    FOREIGN KEY (categoria_id) REFERENCES categoria (id) ON DELETE CASCADE
);


CREATE TABLE estudiante
(
    id     BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    email  VARCHAR(100) NOT NULL UNIQUE
);


CREATE TABLE estudiantes_cursos
(
    estudiante_id BIGINT NOT NULL,
    curso_id      BIGINT NOT NULL,
    PRIMARY KEY (estudiante_id, curso_id),
    FOREIGN KEY (estudiante_id) REFERENCES estudiante (id) ON DELETE CASCADE,
    FOREIGN KEY (curso_id) REFERENCES curso (id) ON DELETE CASCADE
);